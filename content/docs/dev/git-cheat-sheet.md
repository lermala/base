---
title: Шпаргалка по git
weight: 50
---

Полезные ссылки:
- Шпаргалка https://dangitgit.com/ru

## Просмотр информации по коммитам в ветке

Посмотреть краткую информацию по коммитам
```bash
git log --oneline
```

Гибкая настройка информации по коммитам
```bash
git log --pretty=format:"%h: %s (%ar, %an)"
```

{{% details title="Useful specifiers for git log --pretty=format" closed="true" %}}

|tag|description|
|-|-|
|%H |Commit hash|
|%h|Abbreviated commit hash|
|%T|Tree hash|
|%t|Abbreviated tree hash|
|%P|Parent hashes|
|%p|Abbreviated parent hashes|
|%an|Author name|
|%ae|Author email|
|%ad|Author date (format respects the --date=option)|
|%ar|Author date, relative|
|%cn|Committer name|
|%ce|Committer email|
|%cd|Committer date|
|%cr|Committer date, relative|
|%s|Subject|

{{% /details %}}

[Подробнее о git log](https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History)

## Спрятать изменения (stash)
Пригодится когда нужно спрятать изменения на время, а потом вернуть. Также подойдет для перемещения незакоммиченных изменений в другую ветку.

Спрятать изменения
```bash
git stash
```

Вытащить изменения
```bash
git stash pop
```

## Как откатить? 
### Откатить последний коммит
Откатывает историю и оставляет изменения в рабочей области:
```bash
git reset HEAD~1
```

Существует три основных режима для этой команды:

- soft — откатывает историю, но оставляет изменения в рабочей области  
- mixed — откатывает историю и рабочую область, но оставляет файлы неизменёнными
- hard — полностью откатывает историю, рабочую область и файлы
Пример:

```bash
git reset --hard [хеш_коммита]
```

Где [хеш_коммита] — уникальный идентификатор коммита, до которого вы хотите откатить изменения.

### Изменить название последнего коммита
```bash
git commit --amend -m "Новое название коммита"
```

### Удаление и отмена коммитов
Все способы подробно описаны в справке, например вот как в [IntelliJ IDEA](https://www.jetbrains.com/help/idea/2021.1/undo-changes.html)

- Reset удаляет все коммиты выше выбранного. Там предлагается четыре варианта этой команды. Отличия их в том, как поступить с изменениями в рабочем каталоге и в индексе.
- Revert не удаляет коммит, а создаёт новый, который описывает действия необходимые для отмены выбранного коммита.
- Undo позволяет отменить последний коммит. Но изменения коммита предлагает сохранить в новый changelist. Файлы в рабочем каталоге не изменятся и можно будет их подправить и заново закоммитить.
- Drop — удобная команда для удаления произвольного коммита из середины истории. Под капотом там на самом деле выполняется интерактивный rebase, но в автоматическом режиме.
- Revert Selected Changes напоминает Revert, но отменяет изменения отдельного файла, а не всего коммита. Эта команда доступна на Панели изменённых файлов.
- Get позволяет вернуть любой файл к состоянию на определённый коммит в истории. Выберем файл любым удобным способом и контекстное меню - Git | Show History покажет все коммиты, в которых изменялся данный файл. Кликнув на нужном коммите правой кнопкой увидим команду Get.


## Объединение
### Объединить 2 последних коммита
```bash
git reset --soft "HEAD^"
git commit --amend
```

### Объединить 2 последних коммита
```bash
git rebase -i 
```

## Сделали что-то и запушили
```bash
git branch # уточняем в какой мы ветке
git checkout develop # меняем ветку/создаем при неоходимости
git pull # получаем изменения
# делаем что-то с файлами...
git add . # добавляем все файлы в область
git commit -m "msg..." # делаем коммит с сообщением
git status # проверяем состояние рабочей области
git push # пушим
```

## Работали в одной ветке, но нужно сделать коммит в другую
```bash
git add . # добавляем все в рабочую область
git stash # прячем изменения
git checkout develop # меняем ветку 
git pull # получаем изменения 
git stash -pop # вытаскиваем изменения
git commit -m "msg..." # делаем коммит с сообщением
```